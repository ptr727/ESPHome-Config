# Required substitutions:
# device_name
# rgb_led_pin, e.g. GPIO38

# https://esphome.io/components/light/
light:

  # https://esphome.io/components/light/esp32_rmt_led_strip
  - platform: esp32_rmt_led_strip
    name: ${device_name}_rgb_led
    id: rgb_led
    rgb_order: GRB
    pin: ${rgb_led_pin}
    num_leds: 1
    rmt_channel: 0
    chipset: WS2812

  # TODO: Add status RGB LED
  # https://github.com/esphome/esphome/pull/5814
  
  # https://esphome.io/components/light/status_led
  - platform: status_led
    name: ${device_name}_status_led
    internal: true
    output: status_output

# https://esphome.io/components/output/
output:

  # https://esphome.io/components/output/template.html
  - platform: template
    id: status_output
    type: binary
    write_action:
      - if:
          condition:
             lambda: return state > 0;
          then:
            - light.turn_on:
                id: rgb_led
                red: 100%
                green: 0%
                blue: 0%
                brightness: 25%
          else:
            - light.turn_on: 
                id: rgb_led
                red: 0%
                green: 100%
                blue: 0%
                brightness: 25%
